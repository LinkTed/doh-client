[package]
name = "doh-client"
version = "2.2.0"
edition = "2018"
authors = ["LinkTed <link.ted@mailbox.org>"] 
license = "BSD-3-Clause"
description = "DNS over HTTPS client"
readme = "README.md"
keywords = ["doh", "dns", "http2", "h2"]
include = [
    "src/**/*.rs",
    "tests/*.rs",
    "examples/*.rs", 
    "Cargo.toml",
    "Cargo.lock",
    "README.md",
    "LICENSE",
    ]
repository = "https://github.com/LinkTed/doh-client"
categories = [
    "command-line-utilities",
    "network-programming"
    ]

[features]
default = ["socks5", "native-certs"]
socks5 = ["url", "tokio-socks"]
native-certs = ["rustls-native-certs"]
main-windows-service = ["windows-service", "winlog"]

[dependencies]
libc = "~0.2.81"
base64 = "~0.13"
log = "~0.4.11"
env_logger = "~0.8.2"
clap = "~2.33.3"
tokio-rustls = "~0.22"
futures = "~0.3.8"
h2 = "~0.3"
http = "~0.2.2"
rustls = "~0.19"
webpki = "0.21.4"
bytes = "~1.0"
lru = "0.6.3"
dns-message-parser = "~0.4.5"
cfg-if = "~1.0"
lazy_static = "~1.4"
thiserror = "~1.0.22"

[dependencies.url]
version = "2.2.0"
optional = true

[dependencies.tokio-socks]
version = "0.5.0"
optional = true

[dependencies.tokio]
version = "1.0.0"
features = ["rt-multi-thread", "net", "time", "macros"]

[dependencies.rustls-native-certs]
version = "0.5.0"
optional = true

[dependencies.windows-service]
version = "0.3.1"
optional = true

[dependencies.winlog]
version =  "0.2.6"
optional = true

[[bin]]
name = "completions"
path = "src/main_completions.rs"

[[bin]]
name = "windows-service"
path = "src/main_windows_service.rs"
required-features = ["main-windows-service"]

[profile.release]
lto = true
codegen-units = 1
